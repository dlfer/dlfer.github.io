\usepackage{amsmath}
\usepackage[cmtip,arrow,line,all]{xy}

\newdir{ >}{!/8pt/@{ }*@{>}}
\newdir{< }{!/-8pt/@{ }*@{<}}
\newdir{|-}{!/-8pt/@{|}@*{_}}
\newdir^{=>}{!/5pt/\dir{=}!/2.5pt/\dir{=}*!/-5pt/\dir2{>}}
\renewcommand{\objectstyle}{\displaystyle}
\renewcommand{\labelstyle}{\displaystyle}

\newcommand{\nndiagram}[1]{%
\begin{equation*}\begin{aligned}%
\xymatrix@C+24pt@R+24pt{#1}%
\end{aligned}\end{equation*}%
}

\newcommand{\ndiagram}[2][24pt]{%
\begin{equation*}\begin{aligned}%
\xymatrix@C+#1@R+#1{#2}%
\end{aligned}\end{equation*}%
}

 \newbox\pullbackanglebox
 \setbox\pullbackanglebox=\hbox{\xy \POS(4,0)\ar@{-} (0,0) \ar@{-} (4,4) \endxy}
 \def\pullbackangle{\copy\pullbackanglebox}

\newbox\pushoutanglebox
 \setbox\pushoutanglebox=\hbox{\xy \POS(0,4)\ar@{-} (0,0) \ar@{-} (4,4) \endxy}
 \def\pushoutangle{\copy\pushoutanglebox}

% \newcommand{\pullbackcorner}{\place(100,400)[\pullbackangle]}

% \newcommand{\pushoutcorner}[1][dr]{\save*!/#1+1.2pc/#1:(1,-1)@^{|-}\restore}
% \newcommand{\pullbackcorner}[1][dr]{\save*!/#1-1.2pc/#1:(-1,1)@^{|-}\restore}

% \newcommand{\pushoutcorner}[1][dr]{\save*!/#1+1.8pc/#1:(1,-1)\txt{\pushoutangle}\restore}
% \newcommand{\pullbackcorner}[1][dr]{\save*!/#1-1.8pc/#1:(-1,1)\txt{\pullbackangle}\restore}

\newcommand{\pushoutcorner}[1][dr]{\save*!/#1+1.4pc/#1:(1,-1)\txt{\pushoutangle}\restore}
\newcommand{\pullbackcorner}[1][dr]{\save*!/#1-1.4pc/#1:(-1,1)\txt{\pullbackangle}\restore}

\newcommand{\pushoutcornerDR}[1][1.4pc]{\save*!/dr+#1/dr:(1,-1)\txt{\pushoutangle}\restore}
\newcommand{\pullbackcornerUL}[1][1.4pc]{\save*!/dr-#1/dr:(-1,1)\txt{\pullbackangle}\restore}

